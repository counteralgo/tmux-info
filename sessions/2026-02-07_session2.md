# Session Brief — 2026-02-07 (Session 2)

## Completed

### Fixed vm1-orch SSH Lockout
- UFW was blocking all SSH traffic (port 22) after interrupted Tailscale SSH setup
- Injected emergency startup script via `gcloud compute instances add-metadata` to restore UFW rules
- Reset VM to trigger the fix
- Cleaned up startup script after recovery
- UFW now allows SSH from: everywhere (22/tcp), GCP IAP (35.235.240.0/20), internal (10.128.0.0/16)

### Tailscale SSH — Both VMs
- Enabled Tailscale SSH on vm1-orch: `sudo tailscale set --ssh`
- Enabled Tailscale SSH on vm4-seed: `sudo tailscale set --ssh`
- Added ACL policy to Tailscale admin console (no browser check needed)
- ACL policy saved to repo: `tailscale-acl.json`

### ACL Policy
```json
{
  "acls": [{"action": "accept", "src": ["*"], "dst": ["*:*"]}],
  "ssh": [{"action": "accept", "src": ["autogroup:member"], "dst": ["autogroup:self"], "users": ["autogroup:nonroot"]}]
}
```

### Fixed vm4-seed Locale Issue
- Termius was failing with "cannot set LC_CTYPE" on vm4-seed
- Root cause: `en_US.UTF-8` locale missing — only `C.utf8` was available
- Fix: uncommented `en_US.UTF-8` in `/etc/locale.gen`, ran `locale-gen`, set as default

### Termius Mobile Setup
- Created setup guide: `termius-setup.md`
- Both VMs accessible from phone via Termius with no SSH keys needed

### Connection Test Matrix (all passing)
| From | To | Status |
|---|---|---|
| Termius (phone) | vm1-orch | OK |
| Termius (phone) | vm4-seed | OK |
| vm4-seed | vm1-orch | OK |
| vm1-orch | vm4-seed | OK |

## Tailscale SSH Reference
| VM | Tailscale IP | DNS Name | SSH |
|---|---|---|---|
| vm4-seed | 100.78.159.59 | vm4-seed.tail5ceaf1.ts.net | On |
| vm1-orch | 100.108.11.17 | vm1-orch.tail5ceaf1.ts.net | On |
